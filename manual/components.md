# Компоненты

Компоненты - это виджеты, объекты, которые на вход получают какие-либо данные и должны произвести какой-нибудь вывод.
В Битрикс компоненты делятся на 2 вида:
- простые
- комплексные

Комплексные компоненты - это по сути простые роутеры, которые подключают разные файлы в зависимости от URL.
Дополнительно можно нагрузить их логикой, чтобы хоть как то оправдать их существование.

> НИКОГДА не используйте комплексные компоненты!
> Для маршрутизации страниц существует роутер (urlrewrite.php).
> Выделяйте конкретный функционал в конкретную страницу или сервис.

## Структура

Список файлов и порядок взаимодействия

## Логика работы

Алгоритм работы, доступные переменные, ...

## Шаблоны

При реализации шаблонов для компонентов, вся информация должна выводиться на подготовленных компонентом данных `$arResult`, параметры компонента `$arParams` должны использоваться только для настройки отображения (например, "формат даты и времени", "флаг отображения картинки", ...).  
Исключением служат компоненты, которые не имеют подготовленных данных (отсутствует `arResult`).  
Это могут быть компоненты, которые только отображают информацию определенным образом.  
В шаблоне компонента, желательно использовать методологию [БЭМ](https://ru.bem.info), как минимум .  
Наименования класса главного блока (т.е. блока, который оборачивает в себя весь шаблон), должно напрямую формироваться из названия компонента и названия шаблона.  
Например, для компонента `vendor:item.view` и шаблона `product-cart`, главный класс может быть вида `vendor-item-view vendor-item-view_product-cart`. 

## AJAX

Ебаный пиздец, все что можно сказать. Сложно, криво и непонятно.

## Рекомендации

Список рекомендаций, который **очень желательно** соблюдать при работе с компонентами.
Данный список основывается на принципах ООП и на собственном опыте:
1. компонент может либо выводить данные, либо возвращать их. Одновременно это делать **нельзя**.
1. все константы и переменные компонента, должны использоваться только внутри компонента (классы, шаблон и др. файлы компонента).
1. компонент **не может** принимать данные по ссылке и производить их модификацию. Это должны делать хелперы или другие классы бизнес-логики.
1. компонент **должен** основываться только на полученных параметрах. *Например, у нас есть компонент, который выводит закладки пользователя, хранящиеся в инфоблоке. В классе компонента не должен прописываться ID инфоблока (или любая другая информацию об ИБ). Вся информация должна поступать в параметрах компонента. Также можно использовать глобальную конфигурацию модуля. Ссылки на страницы и сервисы, также должны находиться в параметрах, а не в шаблоне (и тем более не в классе)*.
1. шаблон компонента **может** содержать специфическую для сайта информацию (URL адреса страниц, сервисов, включаемые области, ...). Компонент **не может** использовать данную информацию (см. пункт выше).
1. компонент **может** иметь сквозные параметры, которые не используются в классе компонента и не влияют на логику, а используются в шаблоне и влияют на внешний вид. Собственно от шаблона к шаблону, эти параметры могут меняться.
1. компонент **не может** редактировать параметры. Все результаты работы компонента должны записываться в `$arResult`.
